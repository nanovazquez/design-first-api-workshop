# Exercise 2: Autogenerating a client SDK and consuming the mocked server

In this exercise, you will connect a UI to the mocked server so that you can develop the client/UI that will consume the API without having to implement the server first. To do so, you'll generate a Client SDK directly from the API Specification, without manually coding the API calls.

In order to do so, we'll have to:

- Set up the given UI that will call the specified API
- Configure some options for the autogenerated client SDK
- Generate that Client SDK
- Add that SDK to our UI
- Use that SDK in our UI to integrate with the mocked server

## Set up the UI

[TODO]

## Configure the Codegeneration Options

1. From SwaggerHub, while you are editing your API, go to `Export > Codegen Options` in the upper-right corner.

[TODO - ADD SCREENSHOT HERE SHOWING OPTION IN EXPORT MENU]

2. In the options pop-up modal, search for `typescript-fetch` in the `Clients` section. and select it. In there, set the following values:
    - _(Optional)_ supportES6: `true`
    - npmVersion: The version of the npm package that will be the Client SDK. Example: `1.0.0`
    - npmName: The name of the npm package that will be the Client SDK. Example: `nodeconf-api`

[TODO - ADD SCREENSHOT HERE SHOWING CONFIGURED VALUES IN MODAL]


## Download the Client SDK

1. From SwaggerHub, while you are editing your API, go to `Export > Client SDK > typescript-fetch` in the upper-right corner,
which will download the Client SDK.

    Since you have now set some codegen option for that Client SDK (see previous step), it will display a `*` next to the menu entry.

[TODO - ADD SCREENSHOT HERE SHOWING ENTRY IN MENU]

2. Unzip the downloaded file.

3. In the unzipped folder, run `npm install`. This will install the dependencies that the SDK requires and transpile the
typescript SDK to javascript.

## Add that SDK to our UI

There are a number of possible approaches to do this:
- Publish the Client SDK to `npm` and install that package from npm in the UI project, or
- Use `npm link` to use the local Client SDK you've downloaded in your machine from the UI project, or
- In the UI project, `require`/`import` the path to your local Client SDK folder.

For the purpose of this workshop, we recommend either linking the local package or importing the local folder directly.
Therefore, **choose one of the following approaches**.

### To `npm link` the local package

[TODO]

### To require/import the local package

[TODO]

## Use the SDK

Now that you have the client SDK added to our UI, it's time to actually make requests to the (mocked) server!

[TODO make the following prettier, this just a quick reference]

```js
const SDK = require('./typescript-fetch-client-generated');

const apiClient = new SDK.DefaultApi(/*{basePath: 'http://localhost:9999/nodeconf-api'*/});

apiClient.editionsEditionIdActivitiesGet(18).then(console.log);

apiClient.editionsEditionIdFeedbackPost(18, 'tobi', 'awesome!').then(console.log);
```
